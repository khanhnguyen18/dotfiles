* INTRODUCTION
Đây là cấu hình cho doom emacs của tôi.
* ORG FACES
Setup face for org mode
*** Configure
#+begin_src emacs-lisp :results silent
(defun dk/org-mode-setup()
  (text-scale-set 2)
  ;(set-face-attribute 'default nil :font "Source Code Pro for Powerline" :weight 'medium :height 200);"Menlo"
  ;(set-face-attribute 'fixed-pitch nil :font "Fira Code" :height 200)
  ;(set-face-attribute 'org-block nil :foreground nil :inherit 'fixed-pitch)
  ;(set-face-attribute 'org-code nil   :inherit '(shadow fixed-pitch))
  )
(use-package! org
  :hook (org-mode . dk/org-mode-setup)
  :config
  (setq org-ellipsis " ▾")
  (setq org-superstar-headline-bullets-list '("◉" "○" "●" "○" "●" "○" "●"))

  (set-face-attribute 'org-level-1 nil :font "Cantarell" :weight 'regular :height 1.2)
  (set-face-attribute 'org-level-2 nil :font "Cantarell" :weight 'regular :height 1.15)
  (set-face-attribute 'org-level-3 nil :font "Cantarell" :weight 'regular :height 1.1)
  ;; Agenda
  (setq org-agenda-start-with-log-mode t)
  (setq org-log-done 'time)
  (setq org-agenda-files
        '("~/Dropbox/org/task.org"))
  (setq org-todo-keywords
      '((sequence "TODO(t)" "WORK(w)" "HEALTH(h)" "HABIT" "PROCESSING(p)" "|" "DONE(d)")))
        )

(setq org-todo-keyword-faces
  '(("TODO" . "red")
    ("WORK" . "orange")
    ("PROCESSING"."yellow")
    ("DONE"."green")
    ("HEALTH"."CYAN")
    ("HABIT"."BLUE")
))
#+end_src

#+RESULTS:
: #<buffer doom-config.org>

* ORG BABEL
** Add org tempo to support source code block
#+begin_src emacs-lisp :results silent
(use-package! org-tempo
  :config
  (add-to-list 'org-structure-template-alist '("el" . "src emacs-lisp")))
#+end_src

** F5 to open dashboard
#+begin_src emacs-lisp :results silent
(map! "<f5>" (lambda() (interactive) (org-babel-execute-src-block)))
(map! "<f4>" (lambda() (interactive) (org-indent-block)))
(map! "<f3>" (lambda() (interactive) (switch-to-buffer nil)))
#+end_src

* ORG ROARM
This is a tools for managing the notes and daily journal
#+begin_src emacs-lisp :results silent :tangle khanh-pkg.el
(package! org-roam)
#+end_src

#+begin_src emacs-lisp :result silent
(use-package! org-roam
  :custom
  (org-roam-directory "~/Dropbox/RoamNotes")
  (org-roam-completion-everywhere t)
  :bind (("C-c n l" . org-roam-buffer-toggle)
         ("C-c n f" . org-roam-node-find)
         ("C-c n i" . org-roam-node-insert)
         :map org-mode-map
         ("C-M-i" . completion-at-point)
         :map org-roam-dailies-map
         ("Y" . org-roam-dailies-capture-yesterday)
         ("T" . org-roam-dailies-capture-tomorrow))
  :bind-keymap
  ("C-c n d" . org-roam-dailies-map)
  :config
  (require 'org-roam-dailies) ;; Ensure the keymap is available
  (org-roam-db-autosync-mode))
#+end_src

* ORG EXPORT PDF
#+begin_src emacs-lisp :result silent
(setenv "PATH"
        (concat "/Library/TeX/texbin" ":"
                (getenv "PATH")))

(setq org-latex-compiler "xelatex")

(setq org-latex-to-pdf-process
  '("xelatex -interaction nonstopmode %f"
     "xelatex -interaction nonstopmode %f"))

#+end_src

#+RESULTS:
: #<buffer doom-config.org>


* ORG HABIT

#+begin_src emacs-lisp
(setq org-habit-show-all-today t)
#+end_src

* TWEAK UI
** Fix issue for metakey only on Doom Emacs
When plug bluetooth keyboard. Emacs will map meta key with error.
Need deploy code to fix it.

#+begin_src emacs-lisp :results silent
(setq mac-right-option-modifier 'meta)
#+end_src

** Shortcut key for SwitchBuffer
The key Ctrl Alt J is so magical. I can use it for Switch Buffer.
After that I can move down by C-j
#+begin_src emacs-lisp :results silent
(map! "C-M-j" (lambda() (interactive) (+vertico/switch-workspace-buffer)))
#+end_src

** Themes
#+begin_src emacs-lisp :results silent :tangle no
(setq custom--inhibit-theme-enable nil)
(custom-theme-set-faces
 'doom-badger
 '(org-level-1 ((t (:foreground "#fb2874"))))
 '(org-level-2 ((t (:foreground "green1"))))
 '(org-level-3 ((t (:foreground "cyan"))))
)
(setq evil-normal-state-cursor '(box "yellow")
      evil-insert-state-cursor '(bar "yellow")
      evil-visual-state-cursor '(hollow "yellow"))
; màu vàng :foreground "#ffad29"

#+end_src

** Install rainbow mode

#+begin_src emacs-lisp :results silent :tangle khanh-pkg.el
(package! rainbow-mode)
#+end_src
** Fix Trash error
Fix the feature trash. Still have problem with Put Back Feature

#+begin_src emacs-lisp :results silent
(defun system-move-file-to-trash (file)
  (call-process (executable-find "trash") nil 0 nil file))

#+end_src
** Playsound fix
#+begin_src emacs-lisp :tangle khanh-pkg.el

(package! sound-wav)
#+end_src
#+begin_src emacs-lisp :results silent
(setq org-clock-sound "~/SOFT/bell.wav")
(defun play-sound-internal (sound)
  (sound-wav-play (nth 2 sound))
  )
;; (let ((file (expand-file-name "~/Downloads/bell.wav")))
;;   (if (file-exists-p file)
;;       (play-sound-file file)
;;     ))
#+end_src

* DASHBOARD
#+begin_src emacs-lisp :results silent :tangle khanh-pkg.el
;(package! dashboard)
;(package! page-break-lines)
#+end_src

#+begin_src emacs-lisp :results none
(after! org-agenda
  (org-babel-load-file
   (expand-file-name "dashboard.org" "~/.doom.d"))
)
#+end_src

#+RESULTS:
: Loaded /Users/khanh/.doom.d/dashboard.el
